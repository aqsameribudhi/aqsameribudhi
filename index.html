<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>aqsameribudhi ðŸ’•</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: system-ui, Arial, sans-serif;
      background: linear-gradient(#fff0f5, #ffe6ef);
      margin: 0;
      padding: 16px;
      text-align: center;
    }

    h1 {
      color: #d63384;
      font-size: 28px;
    }

    .today {
      background: white;
      border-radius: 18px;
      padding: 18px;
      margin: 20px 0;
      box-shadow: 0 6px 14px rgba(0,0,0,0.12);
    }

    .today h2 {
      color: #d63384;
      margin-bottom: 12px;
    }

    .section {
      margin-top: 16px;
      text-align: left;
    }

    .section h3 {
      margin: 6px 0;
      color: #555;
    }

    textarea {
      width: 100%;
      height: 120px;
      border-radius: 12px;
      padding: 12px;
      border: 1px solid #ccc;
      font-size: 15px;
      resize: none;
    }

    .save-btn {
      margin-top: 8px;
      padding: 12px;
      width: 100%;
      border: none;
      border-radius: 25px;
      background: #d63384;
      color: white;
      font-size: 15px;
      cursor: pointer;
    }

    .days {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
      gap: 10px;
      margin-top: 20px;
    }

    .day {
      background: white;
      padding: 14px;
      border-radius: 14px;
      cursor: pointer;
      font-size: 14px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    #editor {
      display: none;
      margin-top: 20px;
    }

    .image-container {
      margin-top: 16px;
    }

    .image-container img {
      max-width: 100%;
      border-radius: 12px;
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.12);
      margin-top: 10px;
    }

    .upload-btn {
      margin-top: 10px;
      padding: 12px;
      background: #f0b7c0;
      border-radius: 25px;
      cursor: pointer;
      border: none;
      color: white;
    }

    .uploaded-images {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }

    .uploaded-images img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 10px;
    }

    /* Styling for voice recorder */
    .voice-recorder-container {
      margin-top: 20px;
    }

    .voice-recorder-btn {
      margin-top: 10px;
      padding: 12px;
      background: #f0b7c0;
      border-radius: 25px;
      cursor: pointer;
      border: none;
      color: white;
    }

    .voice-container {
      margin-top: 10px;
    }

    .voice-container audio {
      margin-top: 10px;
    }
  </style>
</head>

<body>

<h1>aqsameribudhi ðŸ’–</h1>
<p>riphah walon ki aesi ki tesi</p>

<!-- TODAY -->
<div class="today">
  <h2 id="todayTitle"></h2>

  <div class="section">
    <h3>ðŸ’™ My Thoughts</h3>
    <textarea id="myToday" placeholder="Write your thoughts..."></textarea>
    <button class="save-btn" onclick="saveToday('my')">Save My Thoughts</button>
  </div>

  <div class="section">
    <h3>ðŸ’– My Food Panda Thoughts</h3>
    <textarea id="herToday" placeholder="Write your Food Panda thoughts..."></textarea>
    <button class="save-btn" onclick="saveToday('her')">Save My Food Panda Thoughts</button>
  </div>

  <!-- Image Upload Section -->
  <div class="image-container">
    <input type="file" id="imageUpload" accept="image/*" multiple>
    <button class="upload-btn" onclick="uploadImages()">Upload Memory Images</button>
    <div class="uploaded-images" id="uploadedImages"></div> <!-- To display the images once uploaded -->
  </div>

  <!-- Voice Recording Section -->
  <div class="voice-recorder-container">
    <button class="voice-recorder-btn" onclick="startRecording()">Record Voice</button>
    <button class="voice-recorder-btn" onclick="stopRecording()" disabled>Stop Recording</button>
    <button class="voice-recorder-btn" onclick="playRecording()" disabled>Play Recording</button>
    <div class="voice-container" id="voiceContainer"></div>
  </div>
</div>

<!-- DAYS 1â€“45 -->
<div class="days" id="days"></div>

<div id="editor">
  <h2 id="dayTitle"></h2>

  <div class="section">
    <h3>ðŸ’™ My Thoughts</h3>
    <textarea id="myBox"></textarea>
  </div>

  <div class="section">
    <h3>ðŸ’– My Food Panda Thoughts</h3>
    <textarea id="herBox"></textarea>
  </div>

  <button class="save-btn" onclick="saveClose()">Save</button>
</div>

<script>
  // ðŸ”´ SET START DATE
  const startDate = new Date("2026-01-01"); // The start date is January 1st, 2026

  // Today's Date
  const today = new Date();

  // Calculate the number of days passed since the start date
  const diffDays = Math.floor((today - startDate) / (1000 * 60 * 60 * 24)) + 1;

  // Get the element to display today's message
  const todayTitle = document.getElementById("todayTitle");

  // Set up day title to display only the current day's message
  if (diffDays <= 45) {
    todayTitle.innerText = `Day ${diffDays}`;
  } else {
    todayTitle.innerText = `Day 45`;  // If day exceeds 45, show "Day 45"
  }

  // Store today's thoughts
  const myToday = document.getElementById("myToday");
  const herToday = document.getElementById("herToday");

  // Fetch stored thoughts for today if already present
  myToday.value = localStorage.getItem("day" + diffDays + "_my") || "";
  herToday.value = localStorage.getItem("day" + diffDays + "_her") || "";

  // Save thoughts function
  function saveToday(who) {
    const key = "day" + diffDays + "_" + who;
    const value = who === "my" ? myToday.value : herToday.value;
    localStorage.setItem(key, value);
    alert("Saved â¤ï¸");
  }

  // PRESET DAYS 1â€“14 (MY THOUGHTS) - pre-filled messages for passed days
  const preset = {
    day1_my: "Day 1: Everything feels different without you.",
    day2_my: "Day 2: I keep checking my phone, hoping itâ€™s you.",
    day3_my: "Day 3: Distance hurts, but love stays strong.",
    day4_my: "Day 4: Missing you became part of my routine.",
    day5_my: "Day 5: Even busy days end with your thoughts.",
    day6_my: "Day 6: I smiled today because of a memory.",
    day7_my: "Day 7: One week apart, still us.",
    day8_my: "Day 8: Loving you feels calm and heavy together.",
    day9_my: "Day 9: Random thought â€” your laugh is my favorite sound.",
    day10_my: "Day 10: Some days feel long without you.",
    day11_my: "Day 11: Iâ€™m learning patience because of you.",
    day12_my: "Day 12: Missing you comes in waves.",
    day13_my: "Day 13: Almost there, holding hope.",
    day14_my: "Day 14: We're one step closer to being together."
  };

  // PRESET FUTURE DAYS (empty for future days)
  const futurePreset = {};

  const daysDiv = document.getElementById("days");
  const editor = document.getElementById("editor");
  const myBox = document.getElementById("myBox");
  const herBox = document.getElementById("herBox");
  const dayTitle = document.getElementById("dayTitle");
  let currentDay = "";

  // Create days 1â€“45 and add them to the days container
  for (let i = 1; i <= 45; i++) {
    const d = document.createElement("div");
    d.className = "day";
    d.innerText = "Day " + i;

    // Show only up to the current day
    if (i <= diffDays) {
      d.style.display = 'block';  // Show the day button if it's the current day or earlier
    } else {
      d.style.display = 'none';  // Hide the day button if it's a future day
    }

    d.onclick = () => openDay(i);
    daysDiv.appendChild(d);

    if (i <= 14) {
      // For Day 1-14, pre-fill the messages
      if (preset["day" + i + "_my"] && !localStorage.getItem("day" + i + "_my")) {
        localStorage.setItem("day" + i + "_my", preset["day" + i + "_my"]);
      }
    } else {
      // For future days, leave them empty
      localStorage.setItem("day" + i + "_my", "");
    }
  }

  // Open a specific day's editor
  function openDay(num) {
    if (num <= diffDays) {  // Only allow opening days up to the current day
      currentDay = num;
      dayTitle.innerText = "Day " + num;
      myBox.value = localStorage.getItem("day" + num + "_my") || "";
      herBox.value = localStorage.getItem("day" + num + "_her") || "";
      showImagesForDay(num);
      showVoiceForDay(num);
      editor.style.display = "block";
    }
  }

  // Show all images for the selected day
  function showImagesForDay(num) {
    const imageContainer = document.getElementById("uploadedImages");
    const images = JSON.parse(localStorage.getItem("day" + num + "_images")) || [];

    // Clear any existing images
    imageContainer.innerHTML = '';

    // Display all uploaded images
    images.forEach(imageSrc => {
      const imgTag = document.createElement("img");
      imgTag.src = imageSrc;
      imageContainer.appendChild(imgTag);
    });
  }

  // Show all voice recordings for the selected day
  function showVoiceForDay(num) {
    const voiceContainer = document.getElementById("voiceContainer");
    const voices = JSON.parse(localStorage.getItem("day" + num + "_voices")) || [];

    // Clear any existing voice recordings
    voiceContainer.innerHTML = '';

    // Display all uploaded voice recordings
    voices.forEach(voiceSrc => {
      const audioTag = document.createElement("audio");
      audioTag.controls = true;
      audioTag.src = voiceSrc;
      voiceContainer.appendChild(audioTag);
    });
  }

  // Save the thoughts for a day
  function saveClose() {
    localStorage.setItem("day" + currentDay + "_my", myBox.value);
    localStorage.setItem("day" + currentDay + "_her", herBox.value);
    editor.style.display = "none";
  }

  // Voice recording variables
  let mediaRecorder;
  let audioChunks = [];

  // Start voice recording
  function startRecording() {
    navigator.mediaDevices.getUserMedia({ audio: true })
      .then(stream => {
        mediaRecorder = new MediaRecorder(stream);
        mediaRecorder.ondataavailable = event => {
          audioChunks.push(event.data);
        };
        mediaRecorder.onstop = () => {
          const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
          const audioUrl = URL.createObjectURL(audioBlob);
          saveVoice(audioUrl);
          audioChunks = [];
        };
        mediaRecorder.start();
        alert("Recording started. Click 'Stop Recording' to stop.");
      })
      .catch(error => console.error("Error accessing microphone:", error));
  }

  // Stop voice recording
  function stopRecording() {
    if (mediaRecorder) {
      mediaRecorder.stop();
      alert("Recording stopped.");
    }
  }

  // Save voice recording
  function saveVoice(voiceSrc) {
    const voices = JSON.parse(localStorage.getItem("day" + diffDays + "_voices")) || [];
    voices.push(voiceSrc);
    localStorage.setItem("day" + diffDays + "_voices", JSON.stringify(voices));
    showVoiceForDay(diffDays); // Show the newly recorded voices
  }
</script>

</body>
</html>

